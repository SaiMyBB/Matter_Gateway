<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Matter Gateway — Dashboard</title>

  <!-- Styles & Scripts -->
  <link rel="stylesheet" href="/static/style.css" />
  <script defer src="/static/dashboard.js"></script>
  <link rel="icon" href="/static/favicon.ico">
</head>

<body>
  <!-- ===========================
       HEADER SECTION
  ============================ -->
  <header>
    <div class="header-left">
      <h1>Matter Gateway Dashboard</h1>
      <div id="user-info" class="small"></div>
    </div>
    <div class="header-right">
      <div id="status" class="status disconnected">Disconnected</div>
      <button class="logout-btn" onclick="confirmLogout()">Logout</button>
    </div>
  </header>

  <!-- ===========================
       MAIN DASHBOARD SECTION
  ============================ -->
  <main>
    <section id="controls" class="grid"></section>
  </main>

  <!-- ===========================
       FOOTER SECTION
  ============================ -->
  <footer style="text-align:center;padding:10px 0;">
    <small>
      WebSocket: <span id="ws-url">ws://localhost:8000/ws</span> <br />
      &copy; 2025 Matter Gateway — Secure Virtual Device Framework
    </small>
  </footer>

  <!-- ===========================
       LOGOUT CONFIRMATION SCRIPT
  ============================ -->
  <script>
    // Confirm logout before redirect
    function confirmLogout() {
      if (confirm("Are you sure you want to log out?")) {
        window.location.href = "/logout";
      }
    }

    // Optional: Display username from cookie (if available)
    document.addEventListener("DOMContentLoaded", () => {
      const match = document.cookie.match(/session=([^;]+)/);
      const userInfo = document.getElementById("user-info");
      if (userInfo && match) {
        userInfo.textContent = "Welcome, " + decodeURIComponent(match[1]);
      }
    });
  </script>
</body>
</html>
